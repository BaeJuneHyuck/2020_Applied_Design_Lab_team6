
{% extends "home/base.html" %}

{% block title %} esportsPlatform : 대회 상세정보{% endblock %}

{% block content %}

<div class ="container mt-3">

    <div class = "border border-primary rounded bg-light mt-3 p-5 "  >
        <h1 class = "competition_name"> {{ competition.competition_name }} </h1>
        {% if competition.formatted_image %}
            <img src="{{ competition.formatted_image.url }}" class="rounded competition_img mt-1">
        {% else %}
            {% if competition.competition_game in 'LOL' %}
            <a href = "https://kr.leagueoflegends.com/ko-kr/">
            <img class = "competition_img rounded" src = "/static/competitions/images/lol.jpg">
            </a>
            {% elif competition.competition_game in 'Overwatch' %}
            <a href = "https://playoverwatch.com/ko-kr/">
            <img class = "competition_img rounded" src = "/static/competitions/images/overwatch.jpg">
            </a>
            {% endif %}
        {% endif %}
        <table class = "table contents_table head-light table-hover mb-2 " style="color:black">
            <tr >
                <th>종목</th>
                <td> {{ competition.competition_game }} </td>
            </tr>
            <tr>
                <th>주최자</th>
                <td> {{ competition.master}} </td>
            </tr>
            <tr>
                <th>참가자격</th>
                <td> {{ competition.required_tier}} </td>
            </tr>
            <tr>
                <th>대회 등록 일자</th>
                <td> {{ competition.pub_date }} </td>
            </tr>
            <tr>
                <th>대회 기간</th>
                <td> {{ competition.date_start|date:"Y-m-d" }} ~ {{ competition.date_end|date:"Y-m-d" }}</td>
            </tr>
            <tr>
                <th>참가 신청 기간</th>
                <td> {{ competition.attend_start|date:"Y-m-d" }} ~ {{ competition.attend_end|date:"Y-m-d" }}</td>
            </tr>
            <tr>
                <th>게시일</th>
                <td> {{ competition.pub_date|date:"Y-m-d" }}</td>
            </tr>
            <tr>
                <th>대회소개</th>
                <td> {{ competition.competition_text }} </td>
            </tr>
            <tr>
                <th>홈페이지</th>
                {% if competition.competition_game in 'LOL' %}
                <td><a href="https://kr.leagueoflegends.com/ko-kr/">https://kr.leagueoflegends.com/ko-kr/</a>
                {% elif competition.competition_game in 'Overwatch' %}
                <td><a href="https://playoverwatch.com/ko-kr/">https://playoverwatch.com/ko-kr/</a>
                {% endif %}
            </tr>
        </table>

        {% if competition.attend_start <= today and competition.attend_end >= today %}
        <form action="{% url 'competitions:attend' competition.id %}" method="post">
        {% csrf_token %}
        <input type="submit" value="대회 참가하기" class="save btn btn-success">
        </form>
        {% endif %}
    </div>

    <div class = "pager">
        {% if competition.id|add:'-1' > 0 %}
        <a class = "previous" href="{% url 'competitions:detail' competition.id|add:'-1' %}">이전페이지</a>
        {% endif %}

        {% if compare_date < 0 %}
        <a class = "list" href="{% url 'competitions:scheduled' %}">목록</a>
        {% elif compare_date > 0 %}
        <a class = "list" href="{% url 'competitions:past' %}">목록</a>
        {% else %}
        <a class = "list" href="{% url 'competitions:ongoing' %}">목록</a>
        {% endif %}

        {% if competition.id|add:'1' <= total_competition %}
        <a class = "next" href="{% url 'competitions:detail' competition.id|add:'1' %}">다음페이지</a>
        {% endif %}
    </div>


    <!-- comment -->
    <div class = "Comment">
        {% load disqus_tags %}
        <div>
            {% disqus_show_comments %}
        </div>
    </div>

</div>


{% endblock %}
